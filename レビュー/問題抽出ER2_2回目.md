# ER図2
## 全体
- 指摘事項

- 入荷履歴を管理するテーブルが必要です。
 >今回は在庫個数の管理を入荷した履歴と購入した履歴を参照して管理することになっています。商品を入荷したという記録ができるよう、専用のテーブルを作ってあげましょう。

## テーブル名
- 指摘事項


## 管理者
- ユーザーテーブル間の関連付けは必要でしょうか？
## ディスク
- 曲ごとのトラックナンバーは必要ありません。ディスクNoについては必要なためこちらに変更しておきましょう。
- 曲とディスク間の関係性が不適切。
    >1曲に対して複数のディスクが結びつく関係性になっています。こちら見直しましょう。

## 曲
- トラックナンバーがありません。


## エンドユーザ
- 配送先に関する情報は、別テーブルに独立させた上でそこと関連付けさせましょう。複数の配送先を保存できるようにする必要があります。
- 管理者との関連付けは必要でしょうか？カーディナリティも不適切です。再考お願い致します。
- 名（漢字）のカラムが必要です。

## 商品
- ディスクIDは必要ありません。こちらはディスクテーブルに記載しましょう。
- 管理者との関連付けは必要でしょうか？再考お願い致します。
- 計3つ、必要のないカラムが設定されています。
    >ジャケット画像、シングル名、ディスク枚数いずれも他テーブルから取得可能です。

## カートアイテム
- 主キーはすべてのテーブルにおいて必要です。

## 購入
- 管理者視点でテーブル名を考えましょう。こちらのテーブルを管理するのは管理者です。
- 購入詳細テーブルは子テーブルであることからこちらに記述する必要はありません。
- 現在の出荷状況を示すカラムがありません。
- 購入履歴と購入テーブルの関係が不適切。
    >購入詳細一つに対して複数の購入テーブルが結びついています。課題要件などもう一度確認しましょう。
- 購入日カラムは必要ありません。既存のcreated_atから把握することが可能です。

## 購入詳細
- どの商品かを示すカラムが定義されていません。このテーブルには商品ごとの詳細情報を記すため必要となります。
- 親である購入テーブルの外部キーが存在しない。
 >どの決済情報と結びついているのかを記録する必要があります。
- 購入時点での価格を保存するカラムが必要です。
    購入後に価格変動が起こるかもしれません。

**研修担当レビュー**
<font color="Red"> 再提出の際はこのレビューを残しておいてください。</font>
合格です。
ただし、次の指摘は修正しておいてください。

## エンドユーザ
- PKに関する指摘がたりません。

## 購入詳細  
- 購入時価格はどう持ちますか？
> - 購入詳細IDが不必要
- それはPrimary Keyとして必要ではありませんか？
